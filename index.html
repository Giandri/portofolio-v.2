<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>G | Portfolio</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.cdnfonts.com/css/butler" rel="stylesheet" />
    <link href="https://fonts.cdnfonts.com/css/hilsfiger" rel="stylesheet" />
  </head>
  <body>
    <div class="cursor-dot" data-cursor-dot></div>
    <div class="cursor-outline" data-cursor-outline></div>

    <div class="loader">
      <h1 class="counter">0</h1>
      <div class="circles">
        <div class="circle circle-outer"></div>
        <div class="circle circle-inner"></div>
        <div class="circle-inner-rotator"></div>
        <div class="block"></div>
      </div>
    </div>

    <div class="container">
      <div class="web-content">
        <div class="loader-circle">
          <img src="assets/loader.png" alt="" />
        </div>

        <div class="text-profile">
          <h1>H<span>i</span>,</h1>
          <h3>
            It's me <span>G</span><br />
            Welcome To My Portfolio <br />
            I'm a <span class="auto-type"></span>
          </h3>
        </div>
      </div>
      <nav>
        <div class="info">
          <p>Folio Vol. 999</p>
        </div>
        <div class="logo">
          <p><a href="#">The G Portfolio</a></p>
        </div>
        <div class="toggle-btn">
          <button class="burger" onclick="this.classList.toggle('active');"></button>
        </div>
      </nav>

      <div class="overlay">
        <div class="overlay-menu">
          <div class="menu-item">
            <p id="active"><a href="#">Home</a></p>
          </div>
          <div class="menu-item">
            <p><a href="work.html">Work</a></p>
          </div>
          <div class="menu-item">
            <p><a href="about.html">About</a></p>
          </div>
        </div>

        <div class="sub-nav">
          <p><a href="#">Instagram</a></p>
          <p>.</p>
          <p><a href="#">Linkedin</a></p>
          <p><a href="#">Github</a></p>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/CSSRulePlugin.min.js"></script>

    <script>
      const cursorDot = document.querySelector("[data-cursor-dot]");
      const cursorOutline = document.querySelector("[data-cursor-outline]");

      window.addEventListener("mousemove", function (e) {
        const posX = e.clientX;
        const posY = e.clientY;

        cursorDot.style.left = `${posX}px`;
        cursorDot.style.top = `${posY}px`;

        // cursorOutline.style.left = `${posX}px`;
        // cursorOutline.style.top = `${posY}px`;

        cursorOutline.animate(
          {
            left: `${posX}px`,
            top: `${posY}px`,
          },
          {
            duration: 500,
            fill: "forwards",
          }
        );
      });

      var typed = new Typed(".auto-type", {
        strings: ["", "Collage Student", "Frontend Developer", "Full-Ngestuck Progammer"],
        smartBackspace: true,
        typeSpeed: 50,
        backSpeed: 50,
        loop: true,
      });

      function startLoader() {
        let counterElement = document.querySelector(".counter");
        let currentValue = 0;
        function updateCounter() {
          if (currentValue === 100) {
            return;
          }
          currentValue += Math.floor(Math.random() * 10) + 1;
          if (currentValue > 100) {
            currentValue = 100;
          }
          counterElement.textContent = currentValue + "%";
          let delay = Math.floor(Math.random() * 200) + 250;
          setTimeout(updateCounter, delay);
        }
        updateCounter();
      }
      startLoader();
      document.addEventListener("DOMContentLoaded", function () {
        gsap.from(".circles", 2, {
          top: "-100%",
          ease: "elastic.out",
          delay: 0.5,
        });

        gsap.to(".circle-inner", 2, {
          width: "75px",
          height: "75px",
          ease: "power4.inOut",
          delay: 2,
        });

        gsap.to(".circle-inner-rotator", 1, {
          scale: 1,
          ease: "power4.inOut",
          delay: 2.5,
        });

        gsap.to(".circles", 1.5, {
          rotation: 360,
          ease: "power4.inOut",
          delay: 2.5,
        });

        gsap.to(".block", 0.75, {
          display: "block",
          height: "200px",
          ease: "power4.inOut",
          delay: 4,
        });

        gsap.to(".block", 0.75, {
          width: "800px",
          ease: "power4.inOut",
          delay: 4.5,
        });

        gsap.fromTo(
          ".container",
          {
            duration: 2,
            left: "100%",
            scale: 0.5,
            ease: "power4.inOut",
            delay: 4,
          },
          {
            duration: 2,
            left: "50%",
            scale: 0.5,
            transform: "translateX(-50%)",
            ease: "power4.inOut",
            delay: 4,
          }
        );

        gsap.to(".block", 1.5, {
          width: "0px",
          ease: "power4.inOut",
          delay: 5,
        });

        gsap.to(".circles", 1.5, {
          rotation: 0,
          ease: "power4.inOut",
          delay: 6.5,
        });

        gsap.to(".loader", 5.5, {
          scale: 0,
          ease: "power4.inOut",
          delay: 7,
        });

        gsap.to(".container", 2, {
          scale: 1,
          ease: "power4.inOut",
          delay: 7.5,
        });

        let activeItemIndicator = CSSRulePlugin.getRule(".menu-item p#active::after");
        const toggleButton = document.querySelector(".burger");
        let isOpen = false;

        gsap.set(".menu-item p", {y: 225});

        const timeline = gsap.timeline({paused: true});

        timeline.to(".overlay", {
          duration: 1.5,
          clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
          ease: "power4.inOut",
        });

        timeline.to(
          ".menu-item p",
          {
            duration: 1.5,
            y: 0,
            stagger: 0.2,
            ease: "power4.inOut",
          },
          "-=1"
        );
        timeline.to(
          activeItemIndicator,
          {
            width: "100%",
            duration: 1,
            ease: "power4.inOut",
            delay: 0.5,
          },
          "<"
        );
        timeline.to(
          ".sub-nav",
          {
            bottom: "10%",
            opacity: 1,
            duration: 0.5,
            delay: 0.5,
          },
          "<"
        );

        toggleButton.addEventListener("click", function () {
          if (isOpen) {
            timeline.reverse();
          } else {
            timeline.play();
          }
          isOpen = !isOpen;
        });
      });
    </script>
  </body>
</html>
